/**	Briefcase.js * author: Lily Madar * created: 7 Sept 2014 * source: https://github.com/Lily2point0/briefcasejs **/!function(){function r(e,t){var n="https://spreadsheets.google.com/feeds/list/"+e.id+"/"+e.sheetNumber+"/public/values?alt=json";s(n,t)}function i(e){Object.keys(t).forEach(function(n){if(e.hasOwnProperty(n)){t[n]=e[n]}});return t}function s(e,t){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(r.readyState==4&&r.status==200){o(JSON.parse(r.responseText),n,t)}};r.open("GET",e,true);r.send()}function o(e,t,n){var r=e;switch(t){case"raw":n(r);break;case"json":n(u(r.feed.entry));break;case"csv":n(a(r.feed.entry));break;default:n(r.feed.entry);break}}function u(e){var n=[];for(var r=0;r<e.length;r++){var i=[];var s="";Object.keys(e[r]).forEach(function(o){if(o.toString().substring(0,4)=="gsx$"){var u={};var a={};var f=o.toString().substring(4,o.toString().length);var l=e[r][o].$t;if(t.type=="form"){if(f==t.leftColumnTitle){u.title=l;n.push(u)}else{if(f!="timestamp"){a.name=f.toString();a.value=l;i.push(a)}else{s=l}}}else{if(f==t.leftColumnTitle){u.title=l;n.push(u)}else{a.name=f.toString();a.value=l;i.push(a)}}}});n[r].categories=i;if(t.type=="form"&&t.showTimeStamp)n[r].timestamp=s}return n}function a(e){var n=[];for(var r=0;r<e.length;r++){var i=[];var s=[];Object.keys(e[r]).forEach(function(n){if(n.toString().substring(0,4)=="gsx$"){var o=[];var u=n.toString().substring(4,n.toString().length);var a=e[r][n].$t;if(t.type=="form"&&!t.showTimeStamp){if(u!="timestamp"){i.push(u);s.push(a)}}else{i.push(u);s.push(a)}}});n.push(s)}n.splice(0,0,i);var o=[];for(var u=0;u<n.length;u++){o.push(n[u].join(","))}var a=o.join("\n");return a}var e={version:"0.0.3",getRawJSON:function(e,t){n="raw";r(i(e),t)},getJSON:function(e,t){n="json";r(i(e),t)},getCSV:function(e,t){n="csv";r(i(e),t)}},t={id:"",type:"spreadsheet",sheetNumber:1,leftColumnTitle:"item",showTimeStamp:false},n;this.briefcase=e}()